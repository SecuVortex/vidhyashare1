<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browse Books - VidyaShare</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/animations.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .browse-page {
            min-height: 100vh;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 100px 0 50px;
        }
        
        .page-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .page-header h1 {
            font-size: 2.5rem;
            color: var(--dark-color);
            margin-bottom: 1rem;
        }
        
        .filters-section {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-md);
        }
        
        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .book-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .book-cover {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #e0e0e0 0%, #f5f5f5 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: var(--text-light);
            margin-bottom: 1rem;
        }
        
        .book-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 0.5rem;
        }
        
        .book-author {
            color: var(--text-light);
            margin-bottom: 1rem;
        }
        
        .book-price {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--success-color);
            margin-bottom: 1rem;
        }
        
        .book-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: var(--text-light);
        }
        
        .rating {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn-rent {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.3s;
            width: 100%;
        }
        
        .btn-rent:hover {
            transform: translateY(-2px);
        }
        
        .no-books {
            text-align: center;
            color: var(--text-light);
            font-size: 1.2rem;
            margin-top: 3rem;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <header class="main-header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="logo-section">
                    <a href="../index.html" style="display: flex; align-items: center; gap: 10px;">
                        <img src="../images/logo.svg" alt="VidyaShare" class="logo">
                        <span class="logo-text">VidyaShare</span>
                    </a>
                </div>
                <div class="nav-menu" id="navMenu">
                    <ul class="nav-list">
                        <li><a href="../index.html" class="nav-link">Home</a></li>
                        <li><a href="dashboard.html" class="nav-link">Dashboard</a></li>
                        <li><a href="categories.html" class="nav-link active">Browse Books</a></li>
                        <li><a href="about.html" class="nav-link">About</a></li>
                        <li><a href="contact.html" class="nav-link">Contact</a></li>
                    </ul>
                </div>
                <div class="nav-actions">
                    <button class="btn-login" onclick="window.VidyaShare.openLoginModal()">
                        <i class="fas fa-user"></i> Login
                    </button>
                    <div class="hamburger" id="hamburger">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <div class="browse-page">
        <div class="container">
            <div class="page-header animate-fade-in">
                <h1>Available Books</h1>
                <p style="color: var(--text-light);">Browse our collection of books available for rent</p>
            </div>

            <!-- Filters -->
            <div class="filters-section animate-fade-in-delay">
                <h3 style="margin-bottom: 1rem; color: var(--dark-color);">Filter Books</h3>
                <div class="filters-grid">
                    <select id="categoryFilter">
                        <option value="">All Categories</option>
                        <option value="academic">Academic</option>
                        <option value="fiction">Fiction</option>
                        <option value="anime">Anime/Manga</option>
                        <option value="horror">Horror</option>
                        <option value="romance">Romance</option>
                        <option value="technology">Technology</option>
                    </select>
                    
                    <select id="priceFilter">
                        <option value="">All Prices</option>
                        <option value="0-100">₹0 - ₹100</option>
                        <option value="100-200">₹100 - ₹200</option>
                        <option value="200-500">₹200 - ₹500</option>
                        <option value="500+">₹500+</option>
                    </select>
                    
                    <select id="conditionFilter">
                        <option value="">All Conditions</option>
                        <option value="new">Like New</option>
                        <option value="excellent">Excellent</option>
                        <option value="good">Good</option>
                        <option value="fair">Fair</option>
                    </select>
                    
                    <input type="text" id="searchInput" placeholder="Search books, authors...">
                </div>
            </div>

            <!-- Books Grid -->
            <div class="books-grid" id="booksGrid">
                <!-- Sample books will be loaded here -->
            </div>

            <div class="no-books" id="noBooksMessage" style="display: none;">
                <i class="fas fa-book" style="font-size: 3rem; margin-bottom: 1rem; display: block;"></i>
                <p>No books found matching your criteria</p>
                <p><a href="categories.html">Browse by categories</a> or <a href="sell-book.html">list your own book</a></p>
            </div>
        </div>
    </div>

    <script src="../js/main.js"></script>
    <script>
        // Sample books data
        const sampleBooks = [
            {
                id: 1,
                title: "Data Structures and Algorithms in Java",
                author: "Robert Lafore",
                category: "academic",
                price: 150,
                condition: "excellent",
                rating: 4.5,
                mrp: 850,
                image: "academic"
            },
            {
                id: 2,
                title: "One Piece Vol. 1",
                author: "Eiichiro Oda",
                category: "anime",
                price: 45,
                condition: "good",
                rating: 4.8,
                mrp: 299,
                image: "anime"
            },
            {
                id: 3,
                title: "The Alchemist",
                author: "Paulo Coelho",
                category: "fiction",
                price: 60,
                condition: "excellent",
                rating: 4.7,
                mrp: 350,
                image: "fiction"
            },
            {
                id: 4,
                title: "The Shining",
                author: "Stephen King",
                category: "horror",
                price: 75,
                condition: "good",
                rating: 4.3,
                mrp: 450,
                image: "horror"
            },
            {
                id: 5,
                title: "Pride and Prejudice",
                author: "Jane Austen",
                category: "romance",
                price: 50,
                condition: "fair",
                rating: 4.6,
                mrp: 299,
                image: "romance"
            },
            {
                id: 6,
                title: "JavaScript: The Good Parts",
                author: "Douglas Crockford",
                category: "technology",
                price: 120,
                condition: "excellent",
                rating: 4.4,
                mrp: 650,
                image: "technology"
            },
            {
                id: 7,
                title: "Engineering Mathematics",
                author: "B.S. Grewal",
                category: "academic",
                price: 200,
                condition: "good",
                rating: 4.2,
                mrp: 1200,
                image: "academic"
            },
            {
                id: 8,
                title: "Attack on Titan Vol. 1",
                author: "Hajime Isayama",
                category: "anime",
                price: 55,
                condition: "new",
                rating: 4.9,
                mrp: 350,
                image: "anime"
            }
        ];

        let filteredBooks = [...sampleBooks];

        function renderBooks(books) {
            const booksGrid = document.getElementById('booksGrid');
            const noBooksMessage = document.getElementById('noBooksMessage');

            if (books.length === 0) {
                booksGrid.innerHTML = '';
                noBooksMessage.style.display = 'block';
                return;
            }

            noBooksMessage.style.display = 'none';

            booksGrid.innerHTML = books.map(book => `
                <div class="book-card animate-on-scroll">
                    <div class="book-cover">
                        <i class="fas fa-book"></i>
                    </div>
                    <div class="book-title">${book.title}</div>
                    <div class="book-author">by ${book.author}</div>
                    <div class="book-price">₹${book.price}/month</div>
                    <div class="book-meta">
                        <span class="condition">${book.condition}</span>
                        <div class="rating">
                            <i class="fas fa-star" style="color: #FFD700;"></i>
                            <span>${book.rating}</span>
                        </div>
                    </div>
                    <button class="btn-rent" onclick="rentBook(${book.id})">
                        <i class="fas fa-book-reader"></i> Rent Now
                    </button>
                </div>
            `).join('');
        }

        function filterBooks() {
            const category = document.getElementById('categoryFilter').value;
            const priceRange = document.getElementById('priceFilter').value;
            const condition = document.getElementById('conditionFilter').value;
            const search = document.getElementById('searchInput').value.toLowerCase();

            filteredBooks = sampleBooks.filter(book => {
                let matches = true;

                if (category && book.category !== category) matches = false;
                
                if (priceRange) {
                    if (priceRange === '0-100' && book.price > 100) matches = false;
                    if (priceRange === '100-200' && (book.price < 100 || book.price > 200)) matches = false;
                    if (priceRange === '200-500' && (book.price < 200 || book.price > 500)) matches = false;
                    if (priceRange === '500+' && book.price < 500) matches = false;
                }

                if (condition && book.condition !== condition) matches = false;

                if (search && !book.title.toLowerCase().includes(search) && 
                    !book.author.toLowerCase().includes(search)) matches = false;

                return matches;
            });

            renderBooks(filteredBooks);
        }

        function rentBook(bookId) {
            const book = sampleBooks.find(b => b.id === bookId);
            
            // Check if user wants to login
            const shouldLogin = confirm(`To rent "${book.title}", you need to login or register. Would you like to proceed?`);
            
            if (shouldLogin) {
                window.VidyaShare.openLoginModal();
            }
        }

        // Event listeners
        document.getElementById('categoryFilter').addEventListener('change', filterBooks);
        document.getElementById('priceFilter').addEventListener('change', filterBooks);
        document.getElementById('conditionFilter').addEventListener('change', filterBooks);
        document.getElementById('searchInput').addEventListener('input', filterBooks);

        // Get category from URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const category = urlParams.get('category');
        
        if (category) {
            document.getElementById('categoryFilter').value = category;
            filterBooks();
        } else {
            renderBooks(sampleBooks);
        }
    </script>
</body>
</html>